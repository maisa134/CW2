{"remainingRequest":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mymac/Documents/GitHub/CW2/vue/src/views/Checkout.vue?vue&type=style&index=0&id=e9bc6700&scoped=true&lang=css&","dependencies":[{"path":"/Users/mymac/Documents/GitHub/CW2/vue/src/views/Checkout.vue","mtime":1621540543930},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/css-loader/dist/cjs.js","mtime":1621539915260},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1621539925594},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/postcss-loader/src/index.js","mtime":1621539920604},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/cache-loader/dist/cjs.js","mtime":1621539913396},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/vue-loader/lib/index.js","mtime":1621539925593}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1haW4gewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLmdyaWQtaXRlbSB7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgYm94LXNoYWRvdzogMHB4IDJweCA1cHggIzg4ODsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgbWFyZ2luOiBhdXRvOwogICAgbWFyZ2luLWJvdHRvbTogMiU7CiAgICBwYWRkaW5nOiAxOHB4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgd2lkdGg6IDE1JTsKfQoKCg=="},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n    <div class=\"main\">\n    <h1>Checkout</h1>\n    <p>Enter your details:</p>\n    <p>Name   <input v-model=\"name\"></p>\n    <p>Phone number   <input v-model=\"number\"></p>\n    <button :disabled=\"is_disabled()\" v-on:click=\"message\">Checkout</button>\n\n    \n    <h2>Your cart items</h2>\n    <div v-for=\"lesson in cart_items\" :key=\"lesson.id\"> \n      <ul>\n        <li>Topic: {{ lesson.topic}}</li>\n        <li>Location: {{ lesson.location}} </li>\n        <li>Cost: {{ lesson.cost}}</li>\n        <li>Spaces: {{ lesson.spaces}}</li>\n      </ul>\n      <button class=\"button\"  v-on:click=\"remove(lesson)\" >Remove</button>\n    </div>\n    <button>\n      <router-link to=\"/\">Back to Index</router-link>\n    </button>     \n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  data() {\n    return {\n      cart_items: [],\n      name: \"\",\n      number: \"\",\n    };\n  },\n  mounted() \n  {\n    if (localStorage.getItem('cart_items')) \n    {\n        this.cart_items = JSON.parse(localStorage.getItem('cart_items'));\n    }\n  },\n  methods: {\n    is_disabled() \n    {\n      const letters_only = /^[a-zA-Z]+$/;\n      const numbers_only = /^[0-9]+$/;\n      if ( this.name && this.number)\n      {\n        if( !this.name.match(letters_only) || !this.number.match(numbers_only) )\n        {\n          return true;\n        }\n        return false;\n      }\n      else \n      {\n        return true;\n      }\n    },\n    message: function()\n    {\n      var array_length = this.cart_items.length;\n      var product = this.cart_items[0];\n      for (var i = 0; i < array_length; i++) {\n        product = this.cart_items[i];\n\n        const requestOptions = { \n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            id: product.id, \n            name: this.name,\n            number: this.number,\n            spaces: product.spaces,\n            })\n        };\n        fetch(\"https://romaisea1378.herokuapp.com/orders\", requestOptions)\n        .then(response => console.log(response))\n        .then(data => console.log(data))\n      }\n      \n      alert(this.name + \", thank you. Your order has been submitted\"); \n    },\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  text-align: center;\n}\n\n.grid-item {\n    align-items: center;\n    text-align: center;\n    border-radius: 8px;\n    box-shadow: 0px 2px 5px #888;\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    margin-bottom: 2%;\n    padding: 18px;\n    position: relative;\n    width: 15%;\n}\n\n\n</style>"]}]}