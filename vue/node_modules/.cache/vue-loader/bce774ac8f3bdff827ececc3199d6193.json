{"remainingRequest":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mymac/Documents/GitHub/CW2/vue/src/views/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mymac/Documents/GitHub/CW2/vue/src/views/Checkout.vue","mtime":1621539927102},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/cache-loader/dist/cjs.js","mtime":1621539913396},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/babel-loader/lib/index.js","mtime":1621539912404},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/cache-loader/dist/cjs.js","mtime":1621539913396},{"path":"/Users/mymac/Documents/GitHub/CW2/vue/node_modules/vue-loader/lib/index.js","mtime":1621539925593}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FydF9pdGVtczogW10sCiAgICAgIG5hbWU6ICIiLAogICAgICBudW1iZXI6ICIiLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSAKICB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnRfaXRlbXMnKSkgCiAgICB7CiAgICAgICAgdGhpcy5jYXJ0X2l0ZW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydF9pdGVtcycpKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGlzX2Rpc2FibGVkKCkgCiAgICB7CiAgICAgIGNvbnN0IGxldHRlcnNfb25seSA9IC9eW2EtekEtWl0rJC87CiAgICAgIGNvbnN0IG51bWJlcnNfb25seSA9IC9eWzAtOV0rJC87CiAgICAgIGlmICggdGhpcy5uYW1lICYmIHRoaXMubnVtYmVyKQogICAgICB7CiAgICAgICAgaWYoICF0aGlzLm5hbWUubWF0Y2gobGV0dGVyc19vbmx5KSB8fCAhdGhpcy5udW1iZXIubWF0Y2gobnVtYmVyc19vbmx5KSApCiAgICAgICAgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBlbHNlIAogICAgICB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBtZXNzYWdlOiBmdW5jdGlvbigpCiAgICB7CiAgICAgIHZhciBhcnJheV9sZW5ndGggPSB0aGlzLmNhcnRfaXRlbXMubGVuZ3RoOwogICAgICB2YXIgcHJvZHVjdCA9IHRoaXMuY2FydF9pdGVtc1swXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheV9sZW5ndGg7IGkrKykgewogICAgICAgIHByb2R1Y3QgPSB0aGlzLmNhcnRfaXRlbXNbaV07CgogICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0geyAKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIGlkOiBwcm9kdWN0LmlkLCAKICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgICBudW1iZXI6IHRoaXMubnVtYmVyLAogICAgICAgICAgICBzcGFjZXM6IHByb2R1Y3Quc3BhY2VzLAogICAgICAgICAgICB9KQogICAgICAgIH07CiAgICAgICAgZmV0Y2goIi9vcmRlcnMiLCByZXF1ZXN0T3B0aW9ucykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiBjb25zb2xlLmxvZyhyZXNwb25zZSkpCiAgICAgICAgLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSkKICAgICAgfQogICAgICAKICAgICAgYWxlcnQodGhpcy5uYW1lICsgIiwgdGhhbmsgeW91LiBZb3VyIG9yZGVyIGhhcyBiZWVuIHN1Ym1pdHRlZCIpOyAKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n    <div class=\"main\">\n    <h1>Checkout</h1>\n    <p>Enter your details:</p>\n    <p>Name   <input v-model=\"name\"></p>\n    <p>Phone number   <input v-model=\"number\"></p>\n    <button :disabled=\"is_disabled()\" v-on:click=\"message\">Checkout</button>\n\n    \n    <h2>Your cart items</h2>\n    <div v-for=\"lesson in cart_items\" :key=\"lesson.id\"> \n      <ul>\n        <li>Topic: {{ lesson.topic}}</li>\n        <li>Location: {{ lesson.location}} </li>\n        <li>Cost: {{ lesson.cost}}</li>\n        <li>Spaces: {{ lesson.spaces}}</li>\n      </ul>\n      <button class=\"button\"  v-on:click=\"remove(lesson)\" >Remove</button>\n    </div>\n    <button>\n      <router-link to=\"/\">Back to Index</router-link>\n    </button>     \n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  data() {\n    return {\n      cart_items: [],\n      name: \"\",\n      number: \"\",\n    };\n  },\n  mounted() \n  {\n    if (localStorage.getItem('cart_items')) \n    {\n        this.cart_items = JSON.parse(localStorage.getItem('cart_items'));\n    }\n  },\n  methods: {\n    is_disabled() \n    {\n      const letters_only = /^[a-zA-Z]+$/;\n      const numbers_only = /^[0-9]+$/;\n      if ( this.name && this.number)\n      {\n        if( !this.name.match(letters_only) || !this.number.match(numbers_only) )\n        {\n          return true;\n        }\n        return false;\n      }\n      else \n      {\n        return true;\n      }\n    },\n    message: function()\n    {\n      var array_length = this.cart_items.length;\n      var product = this.cart_items[0];\n      for (var i = 0; i < array_length; i++) {\n        product = this.cart_items[i];\n\n        const requestOptions = { \n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            id: product.id, \n            name: this.name,\n            number: this.number,\n            spaces: product.spaces,\n            })\n        };\n        fetch(\"/orders\", requestOptions)\n        .then(response => console.log(response))\n        .then(data => console.log(data))\n      }\n      \n      alert(this.name + \", thank you. Your order has been submitted\"); \n    },\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  text-align: center;\n}\n\n.grid-item {\n    align-items: center;\n    text-align: center;\n    border-radius: 8px;\n    box-shadow: 0px 2px 5px #888;\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    margin-bottom: 2%;\n    padding: 18px;\n    position: relative;\n    width: 15%;\n}\n\n\n</style>"]}]}